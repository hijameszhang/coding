<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>优雅的使用Git | Web Developer</title>
    <meta name="description" content="Web developer">
    <link rel="shortcut icon" type="icon" href="/coding/coding/images/logo/my.jpg">
    
    <link rel="preload" href="/coding/assets/css/0.styles.9a06647f.css" as="style"><link rel="preload" href="/coding/assets/js/app.bda66ca1.js" as="script"><link rel="preload" href="/coding/assets/js/2.5301b3be.js" as="script"><link rel="preload" href="/coding/assets/js/12.45322000.js" as="script"><link rel="prefetch" href="/coding/assets/js/10.65e9a4bb.js"><link rel="prefetch" href="/coding/assets/js/11.9e3fd327.js"><link rel="prefetch" href="/coding/assets/js/13.91278df4.js"><link rel="prefetch" href="/coding/assets/js/14.24d512d2.js"><link rel="prefetch" href="/coding/assets/js/15.482cbe32.js"><link rel="prefetch" href="/coding/assets/js/16.f2696b58.js"><link rel="prefetch" href="/coding/assets/js/17.4caa8eae.js"><link rel="prefetch" href="/coding/assets/js/18.c623d12e.js"><link rel="prefetch" href="/coding/assets/js/19.ad7b5a63.js"><link rel="prefetch" href="/coding/assets/js/20.effcc9e9.js"><link rel="prefetch" href="/coding/assets/js/21.2ddb2a1f.js"><link rel="prefetch" href="/coding/assets/js/22.70c9ac91.js"><link rel="prefetch" href="/coding/assets/js/23.9f5bec45.js"><link rel="prefetch" href="/coding/assets/js/24.2c097041.js"><link rel="prefetch" href="/coding/assets/js/25.ef69a840.js"><link rel="prefetch" href="/coding/assets/js/26.33c71d45.js"><link rel="prefetch" href="/coding/assets/js/27.9b42ef41.js"><link rel="prefetch" href="/coding/assets/js/28.e1cfa454.js"><link rel="prefetch" href="/coding/assets/js/29.fd9a92f3.js"><link rel="prefetch" href="/coding/assets/js/3.070fe044.js"><link rel="prefetch" href="/coding/assets/js/30.0204da64.js"><link rel="prefetch" href="/coding/assets/js/31.fa7024e0.js"><link rel="prefetch" href="/coding/assets/js/32.67999162.js"><link rel="prefetch" href="/coding/assets/js/33.96063c19.js"><link rel="prefetch" href="/coding/assets/js/34.7efda74e.js"><link rel="prefetch" href="/coding/assets/js/35.a871816e.js"><link rel="prefetch" href="/coding/assets/js/36.37f69431.js"><link rel="prefetch" href="/coding/assets/js/37.26e9bb20.js"><link rel="prefetch" href="/coding/assets/js/38.33dcec0e.js"><link rel="prefetch" href="/coding/assets/js/39.b3a3dae7.js"><link rel="prefetch" href="/coding/assets/js/4.8789dbc3.js"><link rel="prefetch" href="/coding/assets/js/40.ac4acda2.js"><link rel="prefetch" href="/coding/assets/js/41.7e49bde6.js"><link rel="prefetch" href="/coding/assets/js/42.666dbd62.js"><link rel="prefetch" href="/coding/assets/js/43.8976499b.js"><link rel="prefetch" href="/coding/assets/js/44.c241484b.js"><link rel="prefetch" href="/coding/assets/js/45.86cf049d.js"><link rel="prefetch" href="/coding/assets/js/46.f21f338c.js"><link rel="prefetch" href="/coding/assets/js/47.289d9933.js"><link rel="prefetch" href="/coding/assets/js/48.57af0318.js"><link rel="prefetch" href="/coding/assets/js/49.29d5599b.js"><link rel="prefetch" href="/coding/assets/js/5.32ebd2a0.js"><link rel="prefetch" href="/coding/assets/js/50.350b242c.js"><link rel="prefetch" href="/coding/assets/js/51.1cfc7d3f.js"><link rel="prefetch" href="/coding/assets/js/52.07abf413.js"><link rel="prefetch" href="/coding/assets/js/53.587f011d.js"><link rel="prefetch" href="/coding/assets/js/54.9bb24747.js"><link rel="prefetch" href="/coding/assets/js/55.7850accb.js"><link rel="prefetch" href="/coding/assets/js/56.d02b4a21.js"><link rel="prefetch" href="/coding/assets/js/57.099fab41.js"><link rel="prefetch" href="/coding/assets/js/58.13ce710b.js"><link rel="prefetch" href="/coding/assets/js/59.28b0136e.js"><link rel="prefetch" href="/coding/assets/js/6.a94c891c.js"><link rel="prefetch" href="/coding/assets/js/60.022fbb2c.js"><link rel="prefetch" href="/coding/assets/js/61.00fe7075.js"><link rel="prefetch" href="/coding/assets/js/62.6dc716f0.js"><link rel="prefetch" href="/coding/assets/js/63.12b12c53.js"><link rel="prefetch" href="/coding/assets/js/64.2db53cef.js"><link rel="prefetch" href="/coding/assets/js/65.0d7c8758.js"><link rel="prefetch" href="/coding/assets/js/66.010151f5.js"><link rel="prefetch" href="/coding/assets/js/67.8c86ff96.js"><link rel="prefetch" href="/coding/assets/js/7.99d9b27b.js"><link rel="prefetch" href="/coding/assets/js/8.309b23b6.js"><link rel="prefetch" href="/coding/assets/js/9.1df69252.js">
    <link rel="stylesheet" href="/coding/assets/css/0.styles.9a06647f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/coding/" class="home-link router-link-active"><img src="/coding/images/logo/my.jpg" alt="Web Developer" class="logo"> <span class="site-name can-hide">Web Developer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/coding/vue/" class="nav-link">Vue</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/coding/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/coding/js/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/coding/typescript/" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/coding/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/coding/nodejs/" class="nav-link">Node.js</a></li><li class="dropdown-item"><!----> <a href="/coding/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/coding/interview/" class="nav-link">Interview</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding/git/" class="nav-link router-link-active">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">BusinessManagement</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding/trainer/" class="nav-link">讲师</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/hijameszhang/coding" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/coding/vue/" class="nav-link">Vue</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Web</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/coding/html/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/coding/js/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/coding/typescript/" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/coding/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/coding/nodejs/" class="nav-link">Node.js</a></li><li class="dropdown-item"><!----> <a href="/coding/web/" class="nav-link">Web</a></li><li class="dropdown-item"><!----> <a href="/coding/interview/" class="nav-link">Interview</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding/git/" class="nav-link router-link-active">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">BusinessManagement</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding/trainer/" class="nav-link">讲师</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/hijameszhang/coding" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/coding/git/gitCommit.html" class="active sidebar-link">优雅的使用Git</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#写好commit-message" class="sidebar-link">写好commit message</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#commit-提交规范" class="sidebar-link">Commit 提交规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#type" class="sidebar-link">type</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#scope" class="sidebar-link">scope</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#subject" class="sidebar-link">subject</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#body" class="sidebar-link">body</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#footer" class="sidebar-link">footer</a></li></ul></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#validate-commit-msg-ghooks" class="sidebar-link">validate-commit-msg ghooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#验证" class="sidebar-link">验证</a></li></ul></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#使用commitizen" class="sidebar-link">使用commitizen</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#全局安装" class="sidebar-link">全局安装</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#本地安装" class="sidebar-link">本地安装</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#添加配置-使用" class="sidebar-link">添加配置&amp;使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#使用gitmoji" class="sidebar-link">使用gitmoji</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#安装-2" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#使用" class="sidebar-link">使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#使用git-hooks" class="sidebar-link">使用Git hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#pre-commit-github" class="sidebar-link">pre-commit  GitHub</a></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#husky-github" class="sidebar-link">husky  Github</a></li></ul></li><li class="sidebar-sub-header"><a href="/coding/git/gitCommit.html#生成change-log" class="sidebar-link">生成change log</a></li></ul></li><li><a href="/coding/git/github.html" class="sidebar-link">github使用小技巧</a></li><li><a href="/coding/git/githubTools.html" class="sidebar-link">GitHub上整理的一些常用工具</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="优雅的使用git">优雅的使用Git</h1> <blockquote><p>Git的一些实用基本操作, 这里就不作复述了. 主要和大家分享如何更优雅的使用Git</p></blockquote> <h2 id="写好commit-message">写好commit message</h2> <p>Git每次提交代码, 都要写Commit message, 否则提交不了. 我们不仅要写commit message, 而且要写得清晰明了, 以说明本次提交的目的.</p> <p>写好commit message好处有很多, 如:</p> <ul><li>统一项目组的Git commit 日志风格</li> <li>便于日后code review</li> <li>便于收集Change log</li></ul> <h2 id="commit-提交规范">Commit 提交规范</h2> <p>目前业界比较流行的commit规范, 主要包括三部分:</p> <ul><li>header</li> <li>body</li> <li>footer
完整格式如下:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
&lt;blank line&gt;

&lt;body&gt;
&lt;blank line&gt;
&lt;footer&gt;
</code></pre></div><h3 id="type">type</h3> <p>提交的commit类型, 包括以下几种:</p> <ul><li>feat: 新功能</li> <li>fix: 修复问题</li> <li>docs: 修改文档</li> <li>style: 修改代码格式, 不影响代码逻辑</li> <li>refactor: 重构代码, 理论上不影响现有功能</li> <li>perf: 提升性能</li> <li>test: 增加修改测试用例</li> <li>chore: 修改工具相关(包括但不限于文档, 代码生成等)</li></ul> <h3 id="scope">scope</h3> <p>修改文档的范围, 比如: 视图层, 控制层, docs, config, plugin</p> <h3 id="subject">subject</h3> <p>subject 是commit目的的一个简短描述, 一般不超过50个字符</p> <h3 id="body">body</h3> <p>补充说明subject的, 可以分成多行, 适当增加原因, 目的等相关因素, 也可以不写.</p> <h3 id="footer">footer</h3> <ul><li>当有非兼容修改时必须在这里描述清楚</li> <li>关闭issue或是链接到相关文档, 如: Closes #111923, Closes #93201</li></ul> <h2 id="validate-commit-msg-ghooks">validate-commit-msg ghooks</h2> <p>validate-commit-msg <a href="https://github.com/conventional-changelog-archived-repos/validate-commit-msg" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>于检查项目的 Commit message 是否符合格式。
ghooks <a href="https://github.com/ghooks-org/ghooks" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Simple git hooks</p> <h3 id="安装">安装</h3> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev validate-commit-msg`
npm install ghooks --save-dev
</code></pre></div><h3 id="配置">配置</h3> <p>在项目的根目录下, 新建一个名为<code>.vcmrc</code>的文件, 并输入以下内容:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;feat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fix&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;docs&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;refactor&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;perf&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ci&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;chore&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;revert&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scope&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;required&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowed&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;validate&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;multiple&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;warnOnFail&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;maxSubjectLength&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token property">&quot;subjectPattern&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.+&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;subjectPatternErrorMsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;subject does not match subject pattern!&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;helpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;autoFix&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后, 在<code>package.json</code>中添加如下配置</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  …
  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;ghooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gulp lint&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;commit-msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;validate-commit-msg&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;pre-push&quot;</span><span class="token operator">:</span> <span class="token string">&quot;make test&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;post-merge&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm install&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;post-rewrite&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm install&quot;</span><span class="token punctuation">,</span>
      …
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  …
<span class="token punctuation">}</span>
</code></pre></div><p>可以根据项目的需要来添加, 例如:</p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;ghooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;commit-msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;validate-commit-msg&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="验证">验证</h3> <p>每次git commit的时候，这个脚本就会自动检查 Commit message 是否合格。如果不合格，就会报错。</p> <div class="language- extra-class"><pre class="language-text"><code>$ git add -A 
$ git commit -m &quot;edit markdown&quot; INVALID COMMIT MSG: does not match &quot;&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;&quot; ! was: edit markdown
</code></pre></div><h2 id="使用commitizen">使用commitizen</h2> <p>工具commitizen可以帮忙我们写出规范的commit message.   <a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="全局安装">全局安装</h3> <div class="language- extra-class"><pre class="language-text"><code>&gt; npm install -g commitizen
</code></pre></div><h4 id="初始化及使用">初始化及使用</h4> <p>···</p> <blockquote><p>commitizen init cz-conventional-changelog --save-dev --save-exact</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>
以上命令将执行以下3个动作:
* 安装cz-conventional-changelog依赖包
* 保存依赖包信息到package.json的dependencies七devDependencies中
* 添加config.commitizen字段到package.json中, 可能的配置如下:
``` json
  &quot;config&quot;: {
    &quot;commitizen&quot;: {
      &quot;path&quot;: &quot;cz-conventional-changelog&quot;
    }
  }
</code></pre></div><div class="tip custom-block"><p>如果以前使用过cz-conventional-changelog, 在末尾添加<code>--force</code>参数, 强制更新package.json中的配置.
更多信息可以通过命令<code>commitizen help</code>获得</p></div> <p>接下来我们就可以愉快的使用<code>git cz</code>命令来代替<code>git commit</code>命令了.</p> <div class="language- extra-class"><pre class="language-text"><code>E:\github\coding_docs&gt;git cz
cz-cli@3.1.1, cz-conventional-changelog@2.1.0

Line 1 will be cropped at 100 characters. All other lines will be wrapped after 100 characters.

? Select the type of change that you're committing: feat:     A new feature
? What is the scope of this change (e.g. component or file name)? (press enter to skip)
 gitCommit.md, package.json
? Write a short, imperative tense description of the change:
 add a new md file=&gt; how to use git well
? Provide a longer description of the change: (press enter to skip)

? Are there any breaking changes? Yes
? Describe the breaking changes:
 how to use git well
? Does this change affect any open issues? No
</code></pre></div><h3 id="本地安装">本地安装</h3> <blockquote><p>本地安装可以确保项目的所有开发者都能执行相同的commitizen版本.</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>npm install commitizen --save-dev
npm commitizen init cz-conventional-changelog --save-dev --save-exact
</code></pre></div><p>或者</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add commitizen --dev
yarn commitizen init cz-conventional-changelog --dev --save-exact
</code></pre></div><h3 id="添加配置-使用">添加配置&amp;使用</h3> <p>手动添加如下配置至package.json文件中:</p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git-cz&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>当需要commit文件时, 执行<code>npm run commit</code>即可.</p> <h2 id="使用gitmoji">使用gitmoji</h2> <p>gitmoji 和 commitizen的作用都是帮助我们写出规范的commit message，不过gitmoji有更好玩的 moji表情。（ 用moji来表示type ） <a href="https://github.com/carloscuesta/gitmoji-cli" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="安装-2">安装</h3> <div class="language- extra-class"><pre class="language-text"><code>npm install -g gitmoji-cli
</code></pre></div><h3 id="使用">使用</h3> <div class="language- extra-class"><pre class="language-text"><code>gitmoji -c
</code></pre></div><p>挑选个符合场景的moji提交本次更改:
<img src="/coding/images/640.gif" alt="images"></p> <h2 id="使用git-hooks">使用Git hooks</h2> <p>与其他版本控制系统一样，当某些重要事件发生时，Git 可以调用自定义脚本，Git 有很多钩子可以用来调用脚本自定义 Git。在 .git -&gt; hooks 目录下可以看到示例。 例如：pre-commit就是在代码提交之前做些事情。如果你打开了 hooks 目录里面的 *.sample 文件，你可以看见里面写的shell脚本。但是我想用 Js 写 hooks 咋办？husky、pre-commit就能满足你。</p> <p>现在我们想实现一个提交代码时使用 Eslint 进行代码检查的功能</p> <h3 id="pre-commit-github">pre-commit  <a href="https://github.com/observing/pre-commit" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h4 id="安装-3">安装</h4> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev pre-commit
</code></pre></div><h4 id="配置-2">配置</h4> <p>在package.json 中配置pre-commit</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint [options] [file|dir|glob|*]&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;lint&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="提交代码">提交代码:</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; git commit -m &quot;test:Keep calm and commit&quot;
</code></pre></div><h3 id="husky-github">husky  <a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h4 id="安装-4">安装</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; npm install husky@next --save-dev
</code></pre></div><h4 id="配置-3">配置</h4> <p>和 pre-commit 一样，还是在package.json中配置。但是处理pre-commit钩子它还可以做的更多。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint [options] [file|dir|glob]*&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm lint&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;pre-push&quot;</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="生成change-log">生成change log</h2> <p>如果你的所有 Commit 都符合 Angular 格式，那么发布新版本时， Change log 就可以用脚本自动生成（例1，例2，例3）。</p> <p>生成的文档包括以下三个部分。</p> <ul><li>New features</li> <li>Bug fixes</li> <li>Breaking changes.</li></ul> <p>每个部分都会罗列相关的 commit ，并且有指向这些 commit 的链接。当然，生成的文档允许手动修改，所以发布前，你还可以添加其他内容。
conventional-changelog 就是生成 Change log 的工具，运行下面的命令即可。</p> <div class="language- extra-class"><pre class="language-text"><code>$ npm install -g conventional-changelog
$ cd my-project
$ conventional-changelog -p angular -i CHANGELOG.md -w
</code></pre></div><p>上面命令不会覆盖以前的 Change log，只会在CHANGELOG.md的头部加上自从上次发布以来的变动。</p> <p>如果你想生成所有发布的 Change log，要改为运行下面的命令。</p> <div class="language- extra-class"><pre class="language-text"><code>$ conventional-changelog -p angular -i CHANGELOG.md -w -r 0
</code></pre></div><p>为了方便使用，可以将其写入package.json的scripts字段。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;conventional-changelog -p angular -i CHANGELOG.md -w -r 0&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p>以后，直接运行下面的命令即可。</p> <div class="language- extra-class"><pre class="language-text"><code>$ npm run changelog
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/25/2019, 10:46:42 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/coding/git/github.html">
          github使用小技巧
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/coding/assets/js/app.bda66ca1.js" defer></script><script src="/coding/assets/js/2.5301b3be.js" defer></script><script src="/coding/assets/js/12.45322000.js" defer></script>
  </body>
</html>
